import{h as u,m as c,j as i}from"./es38th0r.js";import{u as h}from"./D5yanAmG.js";import{u as d,a as l}from"./BADXMam8.js";function q(){const s=u(),{toastError:a}=h(),o=()=>({baseURL:c().public.apiBase,onRequest({options:e}){s.token&&(e.headers={...e.headers,Authorization:`Bearer ${s.token}`},e.credentials="include")},onRequestError({error:e}){return a("An error occurred while sending the request"),Promise.reject(e)},onResponse({response:e}){return e._data},onResponseError({error:e,response:r}){var t,n;switch(r==null?void 0:r.status){case 401:s.$reset(),a(((t=r._data)==null?void 0:t.message)||"Unauthorized! Please log in."),i("/auth/login");break;case 403:a("Access denied! or Invalid request!");break;case 404:a("Requested resource not found.");break;case 500:a("Internal server error.");break;default:a(r?((n=r._data)==null?void 0:n.message)||"An error occurred":"Network error or server is unreachable.")}return Promise.reject(e)}});return{fetch:async(e,r={})=>{const t={...o(),...r};return await $fetch(e,t)},useFetch:(e,r={})=>{const t={...o(),...r};return l(e,t,"$UqgiltlUfE")},useLazyFetch:(e,r={})=>{const t={...o(),...r};return d(e,t,"$HgqqyPIEgZ")}}}export{q as u};
