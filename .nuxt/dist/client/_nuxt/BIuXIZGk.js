import{_ as V}from"./DdXvD7NX.js";import{k as c,c as i,a as s,e as w,b as p,u as t,F as k,l as x,g as _,d as f,j as g,o as l,f as R,z as N,t as P,i as C}from"./--rz71Vb.js";import{u as F}from"./0rbwi0QL.js";import{u as U}from"./CFwKkAp4.js";import{u as A}from"./-HW9Rane.js";import"./CjliaLmw.js";const B={class:"dashboard-body mt30"},S={class:"data-show-table-area dashboard-box mt30"},T={class:"row gy-4 mt-1"},j={class:"row gy-4 mt-1"},E={class:"form-group"},G=["id","value"],$=["for"],q={key:0},D={class:"custom-card-footer"},L={class:"form-group d-flex justify-content-end align-items-center g30"},M=["disabled"],z={key:0,class:"fas fa-spinner fa-spin me-1"},X={__name:"edit",async setup(I){let n,d;const o=F({name:"",selectedRoles:[],group_name:""}),{useOnlyFetch:m}=U(),{data:b}=([n,d]=c(()=>m("/manage-roles")),n=await n,d(),n),{toastSuccess:y}=A();[n,d]=c(()=>m(`/manage-permissions/${g().query.id}`,{onResponse({response:r}){o.name=r._data.name,o.group_name=r._data.group_name,o.selectedRoles=r._data.roles.map(e=>e.id)}})),await n,d();const v=async()=>{await o.submit(`/manage-permissions/${g().query.id}`,"PUT").then(r=>{o.reset(),o.clear(),y("Permission Updated successfully."),C("/dashboard/manage-permissions")})};return(r,e)=>{const u=V;return l(),i("div",B,[s("div",S,[e[8]||(e[8]=s("div",{class:"table-header-area d-flex align-items-center justify-content-between"},[s("div",{class:"table-heading"},[s("h5",null,"Create New Permission")])],-1)),s("form",{onSubmit:w(v,["prevent"])},[s("div",T,[p(u,{col:"col-md-6",modelValue:t(o).name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(o).name=a),error:t(o).errors.get("name"),label:"Permission Name",placeholder:"Enter permission name"},null,8,["modelValue","error"]),p(u,{col:"col-md-6",modelValue:t(o).group_name,"onUpdate:modelValue":e[1]||(e[1]=a=>t(o).group_name=a),error:t(o).errors.get("group_name"),label:"Permission Group",placeholder:"Enter permission Group"},null,8,["modelValue","error"])]),e[5]||(e[5]=s("div",{class:"table-heading mt-20"},[s("h5",null,"Assign Role")],-1)),e[6]||(e[6]=s("div",{class:"line-1 mt-15"},null,-1)),s("div",j,[(l(!0),i(k,null,x(t(b),a=>(l(),i("div",{key:a.id,class:"col-sm-6 col-lg-3 col-md-4"},[s("div",E,[R(s("input",{type:"checkbox",id:a.id,class:"checkBox","onUpdate:modelValue":e[2]||(e[2]=h=>t(o).selectedRoles=h),value:a.id},null,8,G),[[N,t(o).selectedRoles]]),s("label",{for:a.id},[f(P(a.name)+" ",1),t(o).selectedRoles.includes(a.id)?(l(),i("span",q,e[3]||(e[3]=[s("i",{class:"fa-solid fa-check"},null,-1)]))):_("",!0)],8,$)])]))),128))]),e[7]||(e[7]=s("div",{class:"card-line"},null,-1)),s("div",D,[s("div",L,[s("button",{type:"submit",disabled:t(o).busy,class:"gradient-btn"},[t(o).busy?(l(),i("i",z)):_("",!0),e[4]||(e[4]=f(" Create Permission "))],8,M)])])],32)])])}}};export{X as default};
