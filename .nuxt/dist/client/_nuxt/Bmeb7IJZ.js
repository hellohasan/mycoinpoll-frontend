import{_ as H}from"./PLJPPlAC.js";import{r as V,Q as A,R as C,c0 as R,c as r,o as d,g as x,u as t,a as e,q as D,e as k,t as c,d as T,F,l as P,cB as L,h as B,k as j,K,f as M,v as I,n as S,b as y,y as O,w as z,U as Q}from"./--rz71Vb.js";import{u as Y,a as G,b as q}from"./DNC11X57.js";import{u as E}from"./CFwKkAp4.js";import{u as J}from"./DDUN2HoU.js";import{Modal as X}from"./BIRXU5Tj.js";import{u as Z}from"./0rbwi0QL.js";import{u as ee}from"./-HW9Rane.js";import{_ as te}from"./BD6EIDbc.js";import{u as ne}from"./C19ZpRXz.js";import"./B0Dix5B2.js";import"./CjliaLmw.js";const oe={key:0,class:"user-notification-box-section mt30"},se={class:"user-notification-box warning-bg-notification flex-wrap d-flex align-items-center justify-content-between"},ie={key:1,class:"user-notification-table warning-bg-notification mt30"},ae={class:"notification-text-box d-flex"},le={class:"notification-text"},re={class:"common-table mt30"},de={class:"warning-table custom-table display nowrap mobile-table"},ce={class:"text-center"},ue={class:"text-center"},me=["onClick"],pe={__name:"WalletChecker",setup($){const f=Y(),{modal:h,myDisconnect:a}=G(),n=V([]),v=A(),{user:u}=C(v),_=V(!1);R(f,async l=>{l.isConnected&&await p(L(l.address))},{deep:!0});const{useOnlyFetch:b}=E(),{alert:g,confirm:m}=J(),p=async l=>{var s;if(!_.value){_.value=!0;try{if((s=u.value)!=null&&s.eth_address){const{data:i}=await b("/get-wallet-existence",{method:"POST",body:{address:l}});if(i.value.length>1){g(`We found ${i.value.length} account(s) connected to this same wallet. Choose one account to continue.`,"warning","Attention"),n.value=i.value;return}if(l!=null&&L(u.value.eth_address)!==l){g("Log Out! We found wallet mismatch.","warning","Warning"),a(!0);return}}else{if(!await m("Wallet not associated yet. Do you want to connect this wallet?","warning","Attention"))return;const{data:w}=await b("/update-wallet-existence",{method:"POST",body:{address:l}});v.updateUser(w.value.user),g("Wallet connected successfully.")}}catch(i){throw console.error("Error checking wallet from server:",i),i}}},o=async l=>{await m(`Are you sure? You choose ${l} for this account`,"warning","Attention")&&await b("accept-wallet-existence",{method:"POST",body:{unique_id:l,address:f.value.address},onResponse({response:i}){g("Account wallet updated successfully."),n.value=[],l!==u.value.unique_id&&disconnect(!0)}})};return(l,s)=>(d(),r("div",null,[t(f).isConnected?x("",!0):(d(),r("div",oe,[e("div",se,[s[2]||(s[2]=D('<div class="notification-text-box d-flex"><div class="notification-icon yellow-color"><i class="fas fa-exclamation-triangle"></i></div><div class="notification-text"><h5>Wallet Not Connected</h5><p> This account not associate with any <span class="gradient-color">web3 wallet.</span> Please connect a wallet for next innovation. </p></div></div>',1)),e("a",{href:"#",role:"button",onClick:s[0]||(s[0]=k(i=>t(h).open(),["prevent"])),class:"border-gradient btn3"},"Connect Wallet")])])),t(n).length?(d(),r("div",ie,[e("div",ae,[s[3]||(s[3]=e("div",{class:"notification-icon yellow-color"},[e("i",{class:"fas fa-exclamation-triangle"})],-1)),e("div",le,[e("h5",null,"We got another "+c(t(n).length)+" account with this same wallet address. Please choose one and other account will be null.",1)])]),e("div",re,[e("table",de,[s[6]||(s[6]=e("thead",null,[e("tr",null,[e("th",null,"Unique ID"),e("th",null,"Username"),e("th",null,"Email"),e("th",null,"Action")])],-1)),e("tbody",null,[e("tr",null,[e("td",null,c(t(u).unique_id),1),e("td",null,c(t(u).username),1),e("td",null,c(t(u).email),1),e("td",ce,[e("a",{href:"#",role:"button",onClick:s[1]||(s[1]=k(i=>o(t(u).unique_id),["prevent"])),class:"gradient-btn-small"},s[4]||(s[4]=[e("i",{class:"fas fa-link"},null,-1),T(" Select This ")]))])]),(d(!0),r(F,null,P(t(n),i=>(d(),r("tr",{key:i.unique_id},[e("td",null,c(i.unique_id),1),e("td",null,c(i.username??"N/A"),1),e("td",null,c(i.email),1),e("td",ue,[e("a",{href:"#",role:"button",onClick:k(w=>o(i.unique_id),["prevent"]),class:"gradient-btn-small"},s[5]||(s[5]=[e("i",{class:"fas fa-link"},null,-1),T(" Select This ")]),8,me)])]))),128))])])])])):x("",!0)]))}},fe={class:"modal fade bg-gradient-add",id:"user-email-phone-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},_e={class:"modal-dialog modal-custom-width"},he={class:"modal-content custom-modal"},ve={class:"modal-body-inner"},be={class:"row gy-3"},ge={class:"form-group col-md-12"},ye={class:"input bg-border-input"},xe=["innerHTML"],we={class:"form-group col-md-12"},ke={class:"input bg-border-input"},$e=["innerHTML"],Ce={class:"form-group col-md-12"},Te={class:"input bg-border-input"},Se=["innerHTML"],Ae={class:"d-flex align-items-center modal-footer-area flex-wrap mt-20 g30 justify-content-end"},Ue=["disabled"],Ne={key:0,class:"fas fa-spinner fa-spin"},We={__name:"UserInformation",async setup($){let f,h,a=null;B(()=>{a=new X(document.getElementById("user-email-phone-modal"),{backdrop:"static",keyboard:!1})});const n=Z({name:"",email:"",phone:"",isPhoneValid:!1}),v=p=>{n.isPhoneValid=p.valid},{useOnlyFetch:u}=E(),_=A(),{user:b}=C(_);[f,h]=j(()=>u("check-user-email-phone",{method:"POST",onResponse({response:p}){if(!p._data.verified){const o={...b.value};o.email&&o.email.includes("@mycoinpoll.com")&&(o.email=null),n.fill(o),a.show()}}})),await f,h();const{toastSuccess:g}=ee(),m=async()=>{await n.submit("/update-user-email-phone").then(p=>{g(p.message),_.updateUser(p.user),a.toggle()})};return(p,o)=>{const l=K("vue-tel-input");return d(),r("div",fe,[e("div",_e,[e("div",he,[e("form",{onSubmit:k(m,["prevent"]),method:"post"},[o[7]||(o[7]=e("div",{class:"modal-header-area d-flex align-items-center justify-content-between"},[e("h4",{class:"text-shadow"},"Update Information")],-1)),e("div",ve,[e("div",be,[e("div",ge,[o[3]||(o[3]=e("label",{for:"Name"},"Full Name:",-1)),e("div",ye,[M(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>t(n).name=s),class:S(["form-control",{"is-invalid":t(n).errors.has("name")}]),id:"name",placeholder:"Enter Full name"},null,2),[[I,t(n).name]])]),t(n).errors.has("name")?(d(),r("div",{key:0,class:"text-danger mt-1",innerHTML:t(n).errors.get("name")},null,8,xe)):x("",!0)]),e("div",we,[o[4]||(o[4]=e("label",{for:"email"},"Email Address:",-1)),e("div",ke,[M(e("input",{type:"email","onUpdate:modelValue":o[1]||(o[1]=s=>t(n).email=s),class:S(["form-control",{"is-invalid":t(n).errors.has("email")}]),id:"email",placeholder:"Enter Email Address"},null,2),[[I,t(n).email]])]),t(n).errors.has("email")?(d(),r("div",{key:0,class:"text-danger mt-1",innerHTML:t(n).errors.get("email")},null,8,$e)):x("",!0)]),e("div",Ce,[o[5]||(o[5]=e("label",{for:"phone"},"Phone Number:",-1)),e("div",Te,[y(l,{type:"tel",modelValue:t(n).phone,"onUpdate:modelValue":o[2]||(o[2]=s=>t(n).phone=s),mode:"international",class:S([{"is-invalid":t(n).errors.has("phone")},"dropdown-fix"]),enabledFlags:!0,enabledCountryCode:!0,inputOptions:{showDialCode:!1},autoDefaultCountry:!0,onValidate:v},null,8,["modelValue","class"])]),t(n).errors.has("phone")?(d(),r("div",{key:0,class:"text-danger mt-1",innerHTML:t(n).errors.get("phone")},null,8,Se)):x("",!0)])])]),o[8]||(o[8]=e("div",{class:"line mt30"},null,-1)),e("div",Ae,[e("button",{type:"submit",disabled:t(n).busy,class:"gradient-btn"},[t(n).busy?(d(),r("i",Ne)):x("",!0),o[6]||(o[6]=T(" Update Now "))],8,Ue)])],32)])])])}}},Ve={class:"user-coin-balance d-flex align-items-center"},Le={class:"coin-balance-logo text-center"},Me=["src"],Ie={class:"coin-balance-info"},De={key:0},Fe={key:1},Pe={__name:"TokenCard",props:{tokenId:{type:Number,required:!0}},setup($){const f=$,a=q().getTokenById(f.tokenId),n=O(()=>a.balance===null?"":(Number(a.balance)/Math.pow(10,18)).toFixed(4));return(v,u)=>(d(),r("div",Ve,[e("div",Le,[e("img",{src:t(a).logo,alt:"icon"},null,8,Me)]),e("div",Ie,[e("h6",null,c(t(a).name),1),t(a).balance!==null?(d(),r("h6",De,[e("span",null,c(t(n)),1),e("sup",null,c(t(a).symbol),1)])):(d(),r("p",Fe,"Loading balance..."))])]))}},Be={class:"dashboard-body mt30"},Oe={class:"user-info-overview-box d-flex align-items-center justify-content-between mt30"},qe={class:"user-info-text"},Ee={class:"text-content"},He={class:"refer-link-box mt30"},Re={class:"input bg-border-input"},je={class:"refer-link-box-inner p30"},Ke={class:"input bg-border-input"},ze={class:"refer-link-box-inner d-flex align-items-center g30 position-relative"},Qe=["value"],Ye={class:"user-coin-balance-box mt30"},Ge={class:"row gy-4"},dt={__name:"index",setup($){const f=Q(),h=A(),{user:a}=C(h),n=O(()=>`${f.public.appUrl}/?ref=${a.value.unique_id}`),{copyNow:v}=ne(),u=async()=>{v(n.value)},_=q(),{tokens:b}=C(_);return B(async()=>{await _.fetchFeatureTokens()}),(g,m)=>{var w,U,N;const p=H,o=pe,l=We,s=te,i=Pe;return d(),r("div",Be,[e("div",Oe,[e("div",qe,[e("h4",null,"Hi, "+c((w=t(a))==null?void 0:w.name)+"!",1),e("h6",null,"Username: "+c((U=t(a))==null?void 0:U.username),1),e("h6",null,[m[0]||(m[0]=T(" Wallet: ")),e("span",Ee,c(((N=t(a))==null?void 0:N.eth_address)||"N/A"),1)])])]),m[2]||(m[2]=D('<div class="user-notification-box-section mt30"><div class="user-notification-box warning-bg-notification flex-wrap d-flex align-items-center justify-content-between"><div class="notification-text-box d-flex"><div class="notification-icon yellow-color"><i class="fas fa-info-circle"></i></div><div class="notification-text"><h5>Under Development</h5><p class="gradient-color">We are currently working on Version 3 to provide you with a better experience. Stay tuned for exciting updates!</p></div></div></div></div>',1)),e("div",He,[e("div",Re,[e("div",je,[e("div",Ke,[e("div",ze,[m[1]||(m[1]=e("p",null,"Referral Link :",-1)),e("input",{type:"text",id:"refer-url",ref:"referralInput",readonly:"",value:t(n)},null,8,Qe),y(p,{src:"/images/dashboard/icon/copy.png",alt:"copy",width:"30",onClick:k(u,["prevent"])})])])])])]),y(o),y(s,null,{default:z(()=>[y(l)]),_:1}),e("div",Ye,[e("div",Ge,[(d(!0),r(F,null,P(t(b),W=>(d(),r("div",{key:W.id,class:"col-xxl-4 col-xl-6"},[y(i,{tokenId:W.id},null,8,["tokenId"])]))),128))])])])}}};export{dt as default};
