import{A as g,B as p,R as y,D as h}from"./6IpCoGFE.js";/*! vue-countdown v2.1.2 | (c) 2018-present Chen Fengyuan | MIT */const n=1e3,o=60*n,a=60*o,u=24*a,d="abort",c="end",m="progress",f="start",M="visibilitychange";var E=g({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:t=>t>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:t=>t>=0},transform:{type:Function,default:t=>t}},emits:[d,c,m,f],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0}},computed:{days(){return Math.floor(this.totalMilliseconds/u)},hours(){return Math.floor(this.totalMilliseconds%u/a)},minutes(){return Math.floor(this.totalMilliseconds%a/o)},seconds(){return Math.floor(this.totalMilliseconds%o/n)},milliseconds(){return Math.floor(this.totalMilliseconds%n)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/a)},totalMinutes(){return Math.floor(this.totalMilliseconds/o)},totalSeconds(){return Math.floor(this.totalMilliseconds/n)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(M,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(M,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.autoStart||(this.totalMilliseconds=this.time,this.endTime=this.now()+this.time),this.emitEvents&&this.$emit(f),document.visibilityState==="visible"&&this.continue())},continue(){if(!this.counting)return;const t=Math.min(this.totalMilliseconds,this.interval);if(t>0){let s,i;const l=e=>{s||(s=e),i||(i=e);const r=e-s;r>=t||r+(e-i)/2>=t?this.progress():this.requestId=requestAnimationFrame(l),i=e};this.requestId=requestAnimationFrame(l)}else this.end()},pause(){cancelAnimationFrame(this.requestId)},progress(){this.counting&&(this.update(),this.emitEvents&&this.totalMilliseconds>0&&this.$emit(m,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){this.counting&&(this.pause(),this.counting=!1,this.emitEvents&&this.$emit(d))},end(){this.counting&&(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(c))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},restart(){this.pause(),this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.counting=!1,this.start()},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.update(),this.continue();break;case"hidden":this.pause();break}}},render(){return p(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}});const k=y("tokenData",{state:()=>({tokens:[],token:null,loading:!1,error:null}),getters:{runningTokens:t=>t.tokens.filter(s=>s.status===!0),upcomingTokens:t=>t.tokens.filter(s=>s.status===!1)},actions:{async getTokens(){const t=h();this.loading=!0,this.error=null;try{const s=await $fetch(`${t.public.apiBase}/tokens`);this.tokens=s||[]}catch(s){this.error=s.message||"Failed to fetch tokens"}finally{this.loading=!1}},async getSingleToken(t){if(!t)return this.error="Slug is required",null;const s=h();this.loading=!0,this.error=null;try{this.token=await $fetch(`${s.public.apiBase}/token/${t}`)}catch(i){this.error=i.message||"Failed to fetch token",this.token=null}finally{this.loading=!1}return this.token},clearToken(){this.token=null,this.error=null}}});export{E as i,k as u};
