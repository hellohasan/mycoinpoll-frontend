import{_ as I}from"./x9cXak0-.js";import{R as B,aA as F,D as v,j as y,l as T,c,o as l,a as e,u as o,t as d,s as k,h as N,q as A,d as D,b,e as L,F as R,p as C}from"./6IpCoGFE.js";import{u as g}from"./C1w8izk3.js";import{u as V}from"./BZvXcbvV.js";import"./GevnLgCi.js";import"./CefQi9ay.js";import"./CaNsbxwq.js";const H=3*60*1e3,w=B("userToken",{state:()=>({tokens:[],isLoading:!1,error:null,expirationTime:null}),getters:{getTokenById:t=>s=>t.tokens.find(i=>i.id===s),isDataExpired:t=>!t.expirationTime||Date.now()>=t.expirationTime,userETHAddress(){var s;return((s=y().user)==null?void 0:s.eth_address)||""}},actions:{async fetchFeatureTokens(){if(!this.isDataExpired)return;const{myFetch:t}=g();this.isLoading=!0,this.error=null;try{const s=v(),i=await t(`${s.public.apiBase}/feature-tokens`),n=await Promise.all(i.map(async r=>{const u=await this.fetchTokenBalance(r);return{...r,balance:u}}));this.tokens=n,this.setExpirationTime()}catch{this.error="Failed to fetch feature tokens"}finally{this.isLoading=!1}},async fetchTokenBalance(t){if(!this.userETHAddress||t.contract_address==null)return 0;const{myFetch:s}=g();try{return(await s(`token-balance/${t.contract_address}/${this.userETHAddress}`)).balance}catch{}},setExpirationTime(){this.expirationTime=Date.now()+H},resetIfExpired(){this.isDataExpired&&(this.tokens=[],this.expirationTime=null,this.fetchFeatureTokens())}},persist:{storage:F.localStorage(),beforeRestore:t=>{t.store.resetIfExpired()}}}),M={class:"user-coin-balance d-flex align-items-center"},U={class:"coin-balance-logo text-center"},j=["src"],q={class:"coin-balance-info"},P={key:0},W={key:1},O={__name:"TokenCard",props:{tokenId:{type:Number,required:!0}},setup(t){const s=t,n=w().getTokenById(s.tokenId),r=T(()=>n.balance===null?"":(Number(n.balance)/Math.pow(10,18)).toFixed(4));return(u,p)=>(l(),c("div",M,[e("div",U,[e("img",{src:o(n).logo,alt:"icon"},null,8,j)]),e("div",q,[e("h6",null,d(o(n).name),1),o(n).balance!==null?(l(),c("h6",P,[e("span",null,d(o(r)),1),e("sup",null,d(o(n).symbol),1)])):(l(),c("p",W,"Loading balance..."))])]))}},X={class:"dashboard-body mt30"},z={class:"user-info-overview-box d-flex align-items-center justify-content-between mt30"},G={class:"user-info-text"},J={class:"text-content"},K={class:"refer-link-box mt30"},Q={class:"input bg-border-input"},Y={class:"refer-link-box-inner p30"},Z={class:"input bg-border-input"},ee={class:"refer-link-box-inner d-flex align-items-center g30 position-relative"},te=["value"],se={class:"user-coin-balance-box mt30"},ne={class:"row gy-4"},pe={__name:"index",setup(t){const s=v(),i=y(),{user:n}=k(i),r=T(()=>`${s.public.appUrl}/?ref=${n.value.unique_id}`),{copyNow:u}=V(),p=async()=>{u(r.value)},f=w(),{tokens:E}=k(f);return N(async()=>{await f.fetchFeatureTokens()}),(oe,a)=>{var h,_,m;const S=I,$=O;return l(),c("div",X,[e("div",z,[e("div",G,[e("h4",null,"Hi, "+d((h=o(n))==null?void 0:h.name)+"!",1),e("h6",null,"Username: "+d((_=o(n))==null?void 0:_.username),1),e("h6",null,[a[0]||(a[0]=D(" Wallet: ")),e("span",J,d(((m=o(n))==null?void 0:m.eth_address)||"N/A"),1)])])]),a[2]||(a[2]=A('<div class="user-notification-box-section mt30"><div class="user-notification-box warning-bg-notification flex-wrap d-flex align-items-center justify-content-between"><div class="notification-text-box d-flex"><div class="notification-icon yellow-color"><i class="fas fa-info-circle"></i></div><div class="notification-text"><h5>Under Development</h5><p class="gradient-color">We are currently working on Version 3 to provide you with a better experience. Stay tuned for exciting updates!</p></div></div></div></div>',1)),e("div",K,[e("div",Q,[e("div",Y,[e("div",Z,[e("div",ee,[a[1]||(a[1]=e("p",null,"Referral Link :",-1)),e("input",{type:"text",id:"refer-url",ref:"referralInput",readonly:"",value:o(r)},null,8,te),b(S,{src:"/images/dashboard/icon/copy.png",alt:"copy",width:"30",onClick:L(p,["prevent"])})])])])])]),e("div",se,[e("div",ne,[(l(!0),c(R,null,C(o(E),x=>(l(),c("div",{key:x.id,class:"col-xxl-4 col-xl-6"},[b($,{tokenId:x.id},null,8,["tokenId"])]))),128))])])])}}};export{pe as default};
