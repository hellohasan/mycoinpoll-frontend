import{_ as N,l as c,c as r,g as y,u as o,o as i,a as t,e as h,n as S,F as D,p as U,t as d,aB as B,j,s as F,r as R,h as V,f as A,v as E,m as I,b as O,D as T}from"./6IpCoGFE.js";import{u as q}from"./BZvXcbvV.js";import{u as z}from"./C1w8izk3.js";import"./GevnLgCi.js";import"./CefQi9ay.js";import"./CaNsbxwq.js";const Q={key:0,class:"d-flex justify-content-center"},G={class:"pagination"},H={class:"d-flex align-items-center w-100"},J={class:"d-flex align-items-center pagination-inner"},K={key:0},W={key:1},X=["onClick"],Y={key:2},Z={key:3},tt={__name:"Pagination",props:{data:{type:Object,default:null},limit:{type:Number,default:3}},emits:["pagination-change-page"],setup(u,{emit:x}){const l=u,$=x,k=c(()=>{var a;return((a=l.data)==null?void 0:a.current_page)||1}),_=c(()=>{var a;return((a=l.data)==null?void 0:a.last_page)||1}),w=c(()=>l.data&&l.data.last_page>1),s=c(()=>{var f;if(!((f=l.data)!=null&&f.last_page))return[];let a=Math.max(1,k.value-Math.floor(l.limit/2)),e=Math.min(_.value,a+l.limit-1);e===_.value&&(a=Math.max(1,e-l.limit+1)),a===1&&(e=Math.min(_.value,a+l.limit-1));const n=[];for(let v=a;v<=e;v++)n.push(v);return n}),g=c(()=>s.value[0]>1),C=c(()=>s.value[s.value.length-1]<l.data.last_page),P=c(()=>s.value[0]>2),b=c(()=>s.value[s.value.length-1]<l.data.last_page-1),p=a=>{a>=1&&a<=l.data.last_page&&$("pagination-change-page",a)};return(a,e)=>o(w)?(i(),r("div",Q,[t("div",G,[t("ul",H,[t("li",null,[t("a",{href:"#",role:"button",class:S(["btn1 primary-btn subscribe-btn",{disabled:u.data.current_page===1}]),onClick:e[0]||(e[0]=h(n=>p(u.data.current_page-1),["prevent"]))},"Previous",2)]),t("li",null,[t("ul",J,[o(g)?(i(),r("li",K,[t("a",{href:"#",role:"button",onClick:e[1]||(e[1]=h(n=>p(1),["prevent"]))},"1")])):y("",!0),o(P)?(i(),r("li",W,e[4]||(e[4]=[t("a",{href:"#",role:"button"},"...",-1)]))):y("",!0),(i(!0),r(D,null,U(o(s),n=>(i(),r("li",{key:n},[t("a",{href:"#",role:"button",onClick:h(f=>p(n),["prevent"]),class:S({active:n===u.data.current_page})},d(n),11,X)]))),128)),o(b)?(i(),r("li",Y,e[5]||(e[5]=[t("a",{href:"#",role:"button"},"...",-1)]))):y("",!0),o(C)?(i(),r("li",Z,[t("a",{href:"#",onClick:e[2]||(e[2]=h(n=>p(u.data.last_page),["prevent"]))},d(u.data.last_page),1)])):y("",!0)])]),t("li",null,[t("a",{href:"#",class:S(["btn1 primary-btn subscribe-btn",{disabled:u.data.current_page===u.data.last_page}]),onClick:e[3]||(e[3]=h(n=>p(u.data.current_page+1),["prevent"]))},"Next",2)])])])])):y("",!0)}},et=N(tt,[["__scopeId","data-v-3a676eda"]]),at=B("/images/dashboard/icon/copy.png"),st={class:"dashboard-body mt30"},nt={class:"input bg-border-input"},lt={class:"refer-link-box-inner d-flex align-items-center g30 position-relative"},ot=["value"],rt={class:"data-show-table-area dashboard-box mt30"},it={class:"table-header-area d-flex align-items-center justify-content-between"},ut={class:"table-heading"},ct={class:"search-box-area"},dt={class:"input bg-border-input position-relative"},pt={class:"common-table mt30"},mt={class:"custom-table display nowrap mobile-table"},ht={key:1},kt={__name:"referrals",setup(u){const x=T(),l=j(),{user:$}=F(l),k=c(()=>`${x.public.appUrl}/?ref=${$.value.unique_id}`),{copyNow:_}=q(),w=async()=>{_(k.value)},s=R([]),g=R(""),C=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),{useOnlyFetch:P}=z(),b=async(a=1)=>{const e=new URLSearchParams({page:a.toString(),search:g.value}),{data:n}=await P(`get-referral-users?${e.toString()}`);s.value=n.value},p=()=>{b(1)};return V(()=>{b()}),(a,e)=>{var f,v,L;const n=et;return i(),r("div",st,[t("div",nt,[t("div",lt,[e[1]||(e[1]=t("p",null,"Referral Link :",-1)),t("input",{type:"text",id:"refer-url",ref:"referralInput",readonly:"",value:o(k)},null,8,ot),t("img",{src:at,alt:"copy",onClick:h(w,["prevent"])})])]),t("div",rt,[t("div",it,[t("div",ut,[t("h5",null,"Referral Users ("+d(((f=o(s))==null?void 0:f.total)||0)+")",1)]),t("div",ct,[t("form",{onSubmit:h(p,["prevent"])},[t("div",dt,[e[2]||(e[2]=t("div",{class:"search-icon"},[t("i",{class:"fas fa-search"})],-1)),A(t("input",{"onUpdate:modelValue":e[0]||(e[0]=m=>I(g)?g.value=m:null),type:"search",class:"form-control",id:"search",placeholder:"Search here."},null,512),[[E,o(g)]])])],32)])]),t("div",pt,[t("table",mt,[e[4]||(e[4]=t("thead",null,[t("tr",null,[t("th",null,"SL"),t("th",null,"Reg. Date"),t("th",null,"Name"),t("th",null,"Username"),t("th",null,"Email")])],-1)),t("tbody",null,[((L=(v=o(s))==null?void 0:v.data)==null?void 0:L.length)>0?(i(!0),r(D,{key:0},U(o(s).data,(m,M)=>(i(),r("tr",{key:m.id},[t("td",null,d((o(s).current_page-1)*o(s).per_page+M+1),1),t("td",null,d(C(m.created_at)),1),t("td",null,d(m.name),1),t("td",null,d(m.username),1),t("td",null,d(m.email),1)]))),128)):(i(),r("tr",ht,e[3]||(e[3]=[t("td",{colspan:"100%",class:"text-center"},"No user found!",-1)])))])]),O(n,{data:o(s),onPaginationChangePage:b,limit:3,class:"mt-4"},null,8,["data"])])])])}}};export{kt as default};
