import{_ as w}from"./BWLN8O8p.js";import{_ as k}from"./DdXvD7NX.js";import{r as V,k as _,c as i,a as s,b as f,w as R,e as P,u as o,F,l as N,g as p,d as m,j as b,o as l,f as U,z as A,t as B,i as C}from"./--rz71Vb.js";import{u as S}from"./0rbwi0QL.js";import{u as T}from"./CFwKkAp4.js";import{u as j}from"./-HW9Rane.js";import"./CjliaLmw.js";const E={class:"dashboard-body mt30"},L={class:"dashboard-box mt30 custom-card-form"},$={class:"custom-card-header d-flex align-items-center justify-content-between"},q={class:"add-new-btn"},D={class:"custom-card-body"},M={class:"row gy-4 mt-1"},z={class:"row gy-4 mt-1"},G={class:"form-group"},I=["id","value"],O=["for"],H={key:0},J={class:"custom-card-footer"},K={class:"form-group d-flex justify-content-end align-items-center g30"},Q=["disabled"],W={key:0,class:"fas fa-spinner fa-spin me-1"},ns={__name:"edit",async setup(X){let d,r;const t=S({name:"",selectedPermissions:[]}),c=V([]),{useOnlyFetch:u}=T();[d,r]=_(()=>u("/manage-permissions",{onResponse:({response:n})=>{c.value=n._data}})),await d,r(),[d,r]=_(()=>u(`/manage-roles/${b().query.id}`,{onResponse:({response:n})=>{t.name=n._data.name,t.selectedPermissions=n._data.permissions.map(e=>e.id)}})),await d,r();const{toastSuccess:g}=j(),v=async()=>{await t.submit(`/manage-roles/${b().query.id}`,"PUT").then(n=>{t.reset(),t.clear(),g("Role Updated successfully."),C("/dashboard/manage-role")})};return(n,e)=>{const y=w,h=k;return l(),i("div",E,[s("div",L,[s("div",$,[e[3]||(e[3]=s("div",{class:"table-heading"},[s("h5",null,"Edit Role")],-1)),s("div",q,[f(y,{to:{name:"dashboard-manage-role"},class:"gradient-btn"},{default:R(()=>e[2]||(e[2]=[s("i",{class:"fas fa-list"},null,-1),m(" Role List ")])),_:1})])]),e[8]||(e[8]=s("div",{class:"card-line"},null,-1)),s("form",{onSubmit:P(v,["prevent"])},[s("div",D,[s("div",M,[f(h,{col:"col-md-12",modelValue:o(t).name,"onUpdate:modelValue":e[0]||(e[0]=a=>o(t).name=a),error:o(t).errors.get("name"),label:"Role Name",placeholder:"Enter role name"},null,8,["modelValue","error"]),e[4]||(e[4]=s("div",{class:"table-heading mt-20"},[s("h5",null,"Assign Permission")],-1))]),s("div",z,[(l(!0),i(F,null,N(o(c),a=>(l(),i("div",{key:a.id,class:"col-sm-6 col-lg-3 col-md-4"},[s("div",G,[U(s("input",{type:"checkbox",id:a.id,class:"checkBox","onUpdate:modelValue":e[1]||(e[1]=x=>o(t).selectedPermissions=x),value:a.id},null,8,I),[[A,o(t).selectedPermissions]]),s("label",{for:a.id},[m(B(a.name)+" ",1),o(t).selectedPermissions.includes(a.id)?(l(),i("span",H,e[5]||(e[5]=[s("i",{class:"fa-solid fa-check"},null,-1)]))):p("",!0)],8,O)])]))),128))]),e[7]||(e[7]=s("div",{class:"card-line"},null,-1)),s("div",J,[s("div",K,[s("button",{type:"submit",disabled:o(t).busy,class:"gradient-btn"},[o(t).busy?(l(),i("i",W)):p("",!0),e[6]||(e[6]=m(" Update Role "))],8,Q)])])])],32)])])}}};export{ns as default};
