import{r as b,Q as E,c as i,o as c,t as r,u as s,U as L,h as R,a as e,e as A,f as B,v as C,A as D,b as _,w as P,F as y,l as U,g as $}from"./--rz71Vb.js";import{_ as T}from"./BD6EIDbc.js";import{_ as N}from"./BNzIjoYT.js";import{S as O}from"./Dcn0Ko4L.js";import{u as F}from"./CFwKkAp4.js";import"./-HW9Rane.js";import"./CjliaLmw.js";const V=["disabled"],j={__name:"ExportUser",setup(k){const d=b(!1),o=L(),p=E(),u=async()=>{try{d.value=!0;const n=await $fetch("/export-users",{baseURL:o.public.apiBase,responseType:"blob",method:"GET",credentials:"include",headers:{Authorization:`Bearer ${p.token}`,Accept:"application/octet-stream"}}),m=window.URL.createObjectURL(new Blob([n])),l=document.createElement("a");l.href=m,l.setAttribute("download",`users_${new Date().toISOString().split("T")[0]}.xlsx`),document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(m),document.body.removeChild(l)}catch(n){console.error("Error exporting users:",n),alert("Failed to export users. Please try again.")}finally{d.value=!1}};return(n,m)=>(c(),i("button",{onClick:u,disabled:s(d),class:"border-gradient btn3"},r(s(d)?"Exporting...":"Export Users"),9,V))}},M={class:"dashboard-body mt30"},Q={class:"data-show-table-area dashboard-box mt30"},z={class:"table-header-area d-flex align-items-center justify-content-between"},G={class:"table-heading"},H={class:"search-box-area d-flex"},I={class:"input bg-border-input position-relative"},q={class:"export-area ms-1"},J={class:"common-table mt30"},K={class:"custom-table display nowrap mobile-table"},W={colspan:"100%"},X={key:0},ne={__name:"users",setup(k){const{useOnlyFetch:d}=F(),o=b([]),p=b(!0),u=b(""),n=async h=>{try{const t=new URLSearchParams({page:h,search:u.value}),{data:f,pending:g,error:v}=await d(`get-users?${t.toString()}`);o.value=f.value,p.value=g.value}catch(t){console.error("Error fetching users:",t)}},m=async()=>{await n(1)},l=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return R(async()=>{await n()}),(h,t)=>{var x,w;const f=j,g=T,v=N;return c(),i("div",M,[e("div",Q,[e("div",z,[e("div",G,[e("h5",null,"Total Users ("+r(s(p)?"...":(x=s(o))==null?void 0:x.total)+")",1)]),e("div",H,[e("form",{onSubmit:A(m,["prevent"])},[e("div",I,[t[1]||(t[1]=e("div",{class:"search-icon"},[e("i",{class:"search-icon fas fa-search"})],-1)),B(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>D(u)?u.value=a:null),type:"search",class:"form-control",id:"search",placeholder:"Search here."},null,512),[[C,s(u)]])])],32),e("div",q,[_(g,null,{default:P(()=>[_(f)]),_:1})])])]),e("div",J,[e("table",K,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",null,"SL"),e("th",null,"Reg. Date"),e("th",null,"Name"),e("th",null,"Username"),e("th",null,"Email"),e("th",null,"ETH Address")])],-1)),e("tbody",null,[s(p)?(c(),i(y,{key:0},U(10,a=>e("tr",{key:a},[e("td",W,[_(s(O),{height:"30",width:"100%"})])])),64)):(c(),i(y,{key:1},[(c(!0),i(y,null,U(s(o).data,(a,S)=>(c(),i("tr",{key:a.id},[e("td",null,r((s(o).current_page-1)*s(o).per_page+S+1),1),e("td",null,r(l(a.created_at)),1),e("td",null,r(a.name),1),e("td",null,r(a.username),1),e("td",null,r(a.email),1),e("td",null,r(a.eth_address),1)]))),128)),(w=s(o).data)!=null&&w.length?$("",!0):(c(),i("tr",X,t[2]||(t[2]=[e("td",{colspan:"100%",class:"text-center"},"No transactions found",-1)])))],64))])]),_(v,{data:s(o),onPaginationChangePage:n},null,8,["data"])])])])}}};export{ne as default};
