import{_ as C}from"./BWLN8O8p.js";import{r as f,k as S,c as d,a as t,b as h,w as _,e as b,f as A,v as N,u as o,A as D,F,l as L,o as u,d as V,t as l}from"./--rz71Vb.js";import{u as j}from"./CHhiU8n8.js";import{u as B}from"./CFwKkAp4.js";import{u as U}from"./DDUN2HoU.js";import"./-HW9Rane.js";import"./CjliaLmw.js";import"./B0Dix5B2.js";const $={class:"dashboard-body mt30"},M={class:"custom-card-header d-flex align-items-center justify-content-between"},P={class:"add-new-btn"},T={class:"data-show-table-area dashboard-box mt30"},q={class:"table-header-area d-flex align-items-center justify-content-between"},E={class:"search-box-area"},O={class:"input bg-border-input position-relative"},Q={class:"common-table mt30"},z={class:"custom-table display nowrap mobile-table"},G={class:"d-flex align-items-center action-group justify-content-center"},H=["onClick"],I={key:1},ot={__name:"index",async setup(J){let r,p;const{formatDate:y}=j(),{useOnlyFetch:c}=B(),n=f([]),{pending:K,refresh:v}=([r,p]=S(()=>c("/manage-roles",{onResponse({response:a}){n.value=a._data}})),r=await r,p(),r),i=f(""),g=async()=>{const a=new URLSearchParams({search:i.value});await c(`/manage-roles?${a.toString()}`,{onResponse({response:e}){n.value=e._data}})},{confirm:w,alert:x}=U(),R=async a=>{if(!await w("Are you sure you want to delete this role?","warning"))return;const{data:m}=await c(`/manage-roles/${a}`,{method:"delete",async onResponse({response:s}){await v(),x("Role deleted successfully.")}})};return(a,e)=>{const m=C;return u(),d("div",$,[t("div",M,[e[2]||(e[2]=t("div",{class:"table-heading"},[t("h5",null,"Roles")],-1)),t("div",P,[h(m,{to:{name:"dashboard-manage-role-create"},class:"gradient-btn"},{default:_(()=>e[1]||(e[1]=[t("i",{class:"fas fa-plus"},null,-1),V(" Create Role ")])),_:1})])]),t("div",T,[t("div",q,[e[4]||(e[4]=t("div",{class:"table-heading"},[t("h5",null,"Roles List")],-1)),t("div",E,[t("form",{onSubmit:b(g,["prevent"])},[t("div",O,[e[3]||(e[3]=t("div",{class:"search-icon"},[t("i",{class:"search-icon fas fa-search"})],-1)),A(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>D(i)?i.value=s:null),type:"search",class:"form-control",id:"search",placeholder:"Search here"},null,512),[[N,o(i)]])])],32)])]),t("div",Q,[t("table",z,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"SL"),t("th",null,"Role Name"),t("th",null,"User Count"),t("th",null,"Permissions"),t("th",null,"Date Created"),t("th",null,"Action")])],-1)),t("tbody",null,[o(n)&&o(n).length>0?(u(!0),d(F,{key:0},L(o(n),(s,k)=>(u(),d("tr",{key:s.id},[t("td",null,l(k+1),1),t("td",null,l(s.name),1),t("td",null,l(s.users_count),1),t("td",null,l(s.permissions_count)+" 's",1),t("td",null,l(o(y)(s.created_at)),1),t("td",null,[t("ul",G,[t("li",null,[h(m,{to:{name:"dashboard-manage-role-edit",query:{id:s.id}}},{default:_(()=>e[5]||(e[5]=[t("i",{class:"fas fa-pencil-alt skyblue"},null,-1)])),_:2},1032,["to"])]),t("li",null,[t("button",{type:"button",onClick:b(W=>R(s.id),["prevent"]),class:"bg-transparent"},e[6]||(e[6]=[t("i",{class:"fa-solid fa-trash-can red"},null,-1)]),8,H)])])])]))),128)):(u(),d("tr",I,e[7]||(e[7]=[t("td",{colspan:"100%",class:"text-center"},"No data found!",-1)])))])])])])])}}};export{ot as default};
