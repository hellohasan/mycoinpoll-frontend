{"version":3,"file":"referrals-DfcE2UpV.js","sources":["../../../../components/Backend/Partials/Pagination.vue","../../../../virtual:public?%2Fimages%2Fdashboard%2Ficon%2Fcopy.png","../../../../pages/dashboard/referrals.vue"],"sourcesContent":["<!-- components/CustomPagination.vue -->\n<template>\n\t<div v-if=\"showPagination\" class=\"d-flex justify-content-center\">\n\t\t<div class=\"pagination\">\n\t\t\t<ul class=\"d-flex align-items-center w-100\">\n\t\t\t\t<!-- Previous -->\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"#\" role=\"button\" class=\"btn1 primary-btn subscribe-btn\" @click.prevent=\"changePage(data.current_page - 1)\" :class=\"{ disabled: data.current_page === 1 }\">Previous</a>\n\t\t\t\t</li>\n\n\t\t\t\t<li>\n\t\t\t\t\t<ul class=\"d-flex align-items-center pagination-inner\">\n\t\t\t\t\t\t<!-- First Page -->\n\t\t\t\t\t\t<li v-if=\"showFirst\">\n\t\t\t\t\t\t\t<a href=\"#\" role=\"button\" @click.prevent=\"changePage(1)\">1</a>\n\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t<!-- Left Dots -->\n\t\t\t\t\t\t<li v-if=\"showLeftDots\">\n\t\t\t\t\t\t\t<a href=\"#\" role=\"button\">...</a>\n\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t<!-- Page Numbers -->\n\t\t\t\t\t\t<li v-for=\"page in visiblePages\" :key=\"page\">\n\t\t\t\t\t\t\t<a href=\"#\" role=\"button\" @click.prevent=\"changePage(page)\" :class=\"{ active: page === data.current_page }\">\n\t\t\t\t\t\t\t\t{{ page }}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t<!-- Right Dots -->\n\t\t\t\t\t\t<li v-if=\"showRightDots\">\n\t\t\t\t\t\t\t<a href=\"#\" role=\"button\">...</a>\n\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t<!-- Last Page -->\n\t\t\t\t\t\t<li v-if=\"showLast\">\n\t\t\t\t\t\t\t<a href=\"#\" @click.prevent=\"changePage(data.last_page)\">\n\t\t\t\t\t\t\t\t{{ data.last_page }}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\n\t\t\t\t<!-- Next -->\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"#\" class=\"btn1 primary-btn subscribe-btn\" @click.prevent=\"changePage(data.current_page + 1)\" :class=\"{ disabled: data.current_page === data.last_page }\">Next</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\n\tconst props = defineProps({\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t},\n\t\tlimit: {\n\t\t\ttype: Number,\n\t\t\tdefault: 3\n\t\t}\n\t});\n\n\tconst emit = defineEmits(['pagination-change-page']);\n\tconst currentPage = computed(() => props.data?.current_page || 1);\n\tconst lastPage = computed(() => props.data?.last_page || 1);\n\tconst showPagination = computed(() => props.data && props.data.last_page > 1);\n\t// Calculate visible pages with limit\n\tconst visiblePages = computed(() => {\n\t\tif (!props.data?.last_page) return [];\n\t\tlet start = Math.max(1, currentPage.value - Math.floor(props.limit / 2));\n\t\tlet end = Math.min(lastPage.value, start + props.limit - 1);\n\n\t\tif (end === lastPage.value) {\n\t\t\tstart = Math.max(1, end - props.limit + 1);\n\t\t}\n\n\t\tif (start === 1) {\n\t\t\tend = Math.min(lastPage.value, start + props.limit - 1);\n\t\t}\n\n\t\tconst pages = [];\n\t\tfor (let i = start; i <= end; i++) {\n\t\t\tpages.push(i);\n\t\t}\n\n\t\treturn pages;\n\t});\n\n\t// Show/hide dots and first/last pages\n\tconst showFirst = computed(() => visiblePages.value[0] > 1);\n\tconst showLast = computed(() => visiblePages.value[visiblePages.value.length - 1] < props.data.last_page);\n\tconst showLeftDots = computed(() => visiblePages.value[0] > 2);\n\tconst showRightDots = computed(() => visiblePages.value[visiblePages.value.length - 1] < props.data.last_page - 1);\n\n\t// Handle page change\n\tconst changePage = (page) => {\n\t\tif (page >= 1 && page <= props.data.last_page) {\n\t\t\temit('pagination-change-page', page);\n\t\t}\n\t};\n</script>\n<style scoped>\n\t.disabled {\n\t\tcursor: not-allowed !important;\n\t\topacity: 0.6;\n\t}\n</style>","import { publicAssetsURL } from '#internal/nuxt/paths';export default publicAssetsURL(\"/images/dashboard/icon/copy.png\")","<template>\n\t<div class=\"dashboard-body mt30\">\n\t\t<!--start refer -->\n\t\t<div class=\"input bg-border-input\">\n\t\t\t<div class=\"refer-link-box-inner d-flex align-items-center g30 position-relative\">\n\t\t\t\t<p>Referral Link :</p>\n\t\t\t\t<input type=\"text\" id=\"refer-url\" ref=\"referralInput\" readonly :value=\"referralLink\" />\n\t\t\t\t<img src=\"/images/dashboard/icon/copy.png\" alt=\"copy\" @click.prevent=\"copyReferralLink\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<!--end refer -->\n\n\t\t<!--Start user referable-list -->\n\t\t<div class=\"data-show-table-area dashboard-box mt30\">\n\t\t\t<div class=\"table-header-area d-flex align-items-center justify-content-between\">\n\t\t\t\t<div class=\"table-heading\">\n\t\t\t\t\t<h5>Referral Users ({{ users?.total || 0 }})</h5>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"search-box-area\">\n\t\t\t\t\t<form @submit.prevent=\"searchUsers\">\n\t\t\t\t\t\t<div class=\"input bg-border-input position-relative\">\n\t\t\t\t\t\t\t<div class=\"search-icon\">\n\t\t\t\t\t\t\t\t<i class=\"fas fa-search\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<input v-model=\"searchQuery\" type=\"search\" class=\"form-control\" id=\"search\" placeholder=\"Search here.\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"common-table mt30\">\n\t\t\t\t<table class=\"custom-table display nowrap mobile-table\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>SL</th>\n\t\t\t\t\t\t\t<th>Reg. Date</th>\n\t\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t\t<th>Username</th>\n\t\t\t\t\t\t\t<th>Email</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<template v-if=\"users?.data?.length > 0\">\n\t\t\t\t\t\t\t<tr v-for=\"(user, i) in users.data\" :key=\"user.id\">\n\t\t\t\t\t\t\t\t<td>{{ (users.current_page - 1) * users.per_page + i + 1 }}</td>\n\t\t\t\t\t\t\t\t<td>{{ formatDate(user.created_at) }}</td>\n\t\t\t\t\t\t\t\t<td>{{ user.name }}</td>\n\t\t\t\t\t\t\t\t<td>{{ user.username }}</td>\n\t\t\t\t\t\t\t\t<td>{{ user.email }}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<tr v-else>\n\t\t\t\t\t\t\t<td colspan=\"100%\" class=\"text-center\">No user found!</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t\t<BackendPartialsPagination :data=\"users\" @pagination-change-page=\"getUsers\" :limit=\"3\" class=\"mt-4\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\n\n\tdefinePageMeta({\n\t\ttitle: 'Referrals',\n\t\tlayout: 'backend',\n\t\tauthenticated: true\n\t});\n\n\tconst config = useRuntimeConfig();\n\tconst authStore = useAuthStore();\n\tconst { user } = storeToRefs(authStore);\n\n\t// Referral link logic\n\tconst referralLink = computed(() => {\n\t\treturn `${config.public.appUrl}/?ref=${user.value.unique_id}`;\n\t});\n\n\tconst { copyNow } = useClipboard();\n\tconst copyReferralLink = async () => {\n\t\tcopyNow(referralLink.value);\n\t};\n\n\t// Users data and pagination logic\n\tconst users = ref([]);\n\tconst searchQuery = ref('');\n\n\t// Date formatter\n\tconst formatDate = (dateString) => {\n\t\treturn new Date(dateString).toLocaleDateString('en-US', {\n\t\t\tyear: 'numeric',\n\t\t\tmonth: 'short',\n\t\t\tday: 'numeric'\n\t\t});\n\t};\n\n\t// API calls\n\tconst { useOnlyFetch } = useApi();\n\tconst getUsers = async (page = 1) => {\n\t\tconst params = new URLSearchParams({\n\t\t\tpage: page.toString(),\n\t\t\tsearch: searchQuery.value\n\t\t});\n\n\t\tconst { data: response } = await useOnlyFetch(`get-referral-users?${params.toString()}`);\n\t\tusers.value = response.value;\n\t};\n\n\tconst searchUsers = () => {\n\t\tgetUsers(1);\n\t};\n\n\t// Initial data fetch\n\tonMounted(() => {\n\t\tgetUsers();\n\t});\n</script>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDC,UAAM,QAAQ;AAYd,UAAM,cAAc,SAAS,MAAA;;AAAM,0BAAM,SAAN,mBAAY,iBAAgB;AAAA,KAAC;AAChE,UAAM,WAAW,SAAS,MAAA;;AAAM,0BAAM,SAAN,mBAAY,cAAa;AAAA,KAAC;AAC1D,UAAM,iBAAiB,SAAS,MAAM,MAAM,QAAQ,MAAM,KAAK,YAAY,CAAC;AAE5E,UAAM,eAAe,SAAS,MAAM;;AACnC,UAAI,GAAC,WAAM,SAAN,mBAAY,WAAW,QAAO,CAAE;AACrC,UAAI,QAAQ,KAAK,IAAI,GAAG,YAAY,QAAQ,KAAK,MAAM,MAAM,QAAQ,CAAC,CAAC;AACvE,UAAI,MAAM,KAAK,IAAI,SAAS,OAAO,QAAQ,MAAM,QAAQ,CAAC;AAE1D,UAAI,QAAQ,SAAS,OAAO;AAC3B,gBAAQ,KAAK,IAAI,GAAG,MAAM,MAAM,QAAQ,CAAC;AAAA,MAC5C;AAEE,UAAI,UAAU,GAAG;AAChB,cAAM,KAAK,IAAI,SAAS,OAAO,QAAQ,MAAM,QAAQ,CAAC;AAAA,MACzD;AAEE,YAAM,QAAQ,CAAE;AAChB,eAAS,IAAI,OAAO,KAAK,KAAK,KAAK;AAClC,cAAM,KAAK,CAAC;AAAA,MACf;AAEE,aAAO;AAAA,IACT,CAAE;AAGD,UAAM,YAAY,SAAS,MAAM,aAAa,MAAM,CAAC,IAAI,CAAC;AAC1D,UAAM,WAAW,SAAS,MAAM,aAAa,MAAM,aAAa,MAAM,SAAS,CAAC,IAAI,MAAM,KAAK,SAAS;AACxG,UAAM,eAAe,SAAS,MAAM,aAAa,MAAM,CAAC,IAAI,CAAC;AAC7D,UAAM,gBAAgB,SAAS,MAAM,aAAa,MAAM,aAAa,MAAM,SAAS,CAAC,IAAI,MAAM,KAAK,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9F3D,MAAe,aAAA,gBAAgB,iCAAiC;;;;;ACsEtH,UAAM,SAAS,iBAAkB;AACjC,UAAM,YAAY,aAAc;AAChC,UAAM,EAAE,KAAI,IAAK,YAAY,SAAS;AAGtC,UAAM,eAAe,SAAS,MAAM;AACnC,aAAO,GAAG,OAAO,OAAO,MAAM,SAAS,KAAK,MAAM,SAAS;AAAA,IAC7D,CAAE;AAEmB,iBAAY;AAMhC,UAAM,QAAQ,IAAI,EAAE;AACpB,UAAM,cAAc,IAAI,EAAE;AAG1B,UAAM,aAAa,CAAC,eAAe;AAClC,aAAO,IAAI,KAAK,UAAU,EAAE,mBAAmB,SAAS;AAAA,QACvD,MAAM;AAAA,QACN,OAAO;AAAA,QACP,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAGD,UAAM,EAAE,aAAc,IAAG,OAAQ;AACjC,UAAM,WAAW,OAAO,OAAO,MAAM;AACpC,YAAM,SAAS,IAAI,gBAAgB;AAAA,QAClC,MAAM,KAAK,SAAU;AAAA,QACrB,QAAQ,YAAY;AAAA,MACvB,CAAG;AAED,YAAM,EAAE,MAAM,SAAQ,IAAK,MAAM,aAAa,sBAAsB,OAAO,SAAU,CAAA,EAAE;AACvF,YAAM,QAAQ,SAAS;AAAA,IACvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}