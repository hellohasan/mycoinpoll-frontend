{"file":"index-ax8lUBFw.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEC,UAAM,EAAE,aAAc,IAAG,OAAQ;AACjC,UAAM,UAAU,IAAI,EAAE;AACtB,UAAM,UAAU,IAAI,KAAK;AAEzB,UAAM,eAAe,OAAO,SAAS;AACpC,YAAM,SAAS,IAAI,gBAAgB,EAAE,KAAI,CAAE;AAC3C,YAAM,EAAE,MAAM,SAAS,UAAU,MAAM,aAAa,kBAAkB,OAAO,SAAQ,CAAE,EAAE;AACzF,cAAQ,QAAQ,KAAK;AACrB,cAAQ,QAAQ,QAAQ;AAAA,IACxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../pages/dashboard/manage-learn/index.vue"],"sourcesContent":["<template>\n\t<div class=\"dashboard-body mt30\">\n\t\t<div class=\"dashboard-box mt30 custom-card-form\">\n\t\t\t<div class=\"custom-card-header d-flex align-items-center justify-content-between\">\n\t\t\t\t<div class=\"table-heading\">\n\t\t\t\t\t<h5>Lesson List</h5>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"add-new-btn\">\n\t\t\t\t\t<nuxt-link :to=\"{ name: 'dashboard-manage-learn-create' }\" class=\"gradient-btn\">\n\t\t\t\t\t\t<i class=\"fas fa-plus\"></i>\n\t\t\t\t\t\tCreate Lesson\n\t\t\t\t\t</nuxt-link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"card-line\"></div>\n\t\t\t<div v-if=\"!loading\" class=\"common-table mt30\">\n\t\t\t\t<table class=\"custom-table display nowrap mobile-table\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>SL</th>\n\t\t\t\t\t\t\t<th>Title</th>\n\t\t\t\t\t\t\t<th>Image</th>\n\t\t\t\t\t\t\t<th>Category</th>\n\t\t\t\t\t\t\t<th>Status</th>\n\t\t\t\t\t\t\t<th>Action</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr v-for=\"(lesson, i) in lessons.data\" :key=\"lesson.id\">\n\t\t\t\t\t\t\t<td>{{ ++i }}</td>\n\t\t\t\t\t\t\t<td>{{ lesson.title }}</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<img :src=\"lesson.image\" width=\"120px\" alt=\"\" />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>{{ lesson.category.name }}</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<ElementsStatus :status=\"lesson.status\" />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div class=\"d-flex align-content-between\">\n\t\t\t\t\t\t\t\t\t<nuxt-link :to=\"{ name: 'dashboard-manage-learn-edit', query: { id: lesson.id } }\" class=\"gradient-btn-small\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-edit\"></i>\n\t\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t</nuxt-link>\n\t\t\t\t\t\t\t\t\t<a href=\"#\" role=\"button\" @click.prevent=\"deleteLesson(lesson.id)\" class=\"gradient-btn-small\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-trash\"></i>\n\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t\t<BackendPartialsPagination :data=\"lessons\" @pagination-change-page=\"fetchLessons\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\n\n\tdefinePageMeta({\n\t\ttitle: 'Lesson List',\n\t\tlayout: 'backend',\n\t\tauthenticated: true,\n\t\tpermissions: ['manage-lean']\n\t});\n\n\tconst { useOnlyFetch } = useApi();\n\tconst lessons = ref([]);\n\tconst loading = ref(false);\n\n\tconst fetchLessons = async (page) => {\n\t\tconst params = new URLSearchParams({ page });\n\t\tconst { data, pending, error } = await useOnlyFetch(`manage-lessons?${params.toString()}`);\n\t\tlessons.value = data.value;\n\t\tloading.value = pending.value;\n\t};\n\t//await fetchLessons();\n\tonMounted(async () => {\n\t\tawait fetchLessons();\n\t});\n\n\tconst { confirm, alert } = useSweetAlert();\n\tconst deleteLesson = async (id) => {\n\t\tconst isConfirmed = await confirm(\"Are you sure you want to delete this lesson?\", \"warning\");\n\t\tif (isConfirmed) {\n\t\t\tawait useOnlyFetch(`/manage-lessons/${id}`, {\n\t\t\t\tmethod: 'DELETE',\n\t\t\t\tasync onResponse({ response }) {\n\t\t\t\t\tawait fetchLessons();\n\t\t\t\t\talert(\"Lesson deleted successfully.\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n</script>\n\n<style>\n</style>"],"version":3}