{"file":"useVForm-BndtwnoY.js","mappings":";;;AAIO,SAAS,SAAS,MAAc;AACrC,QAAM,SAAS,iBAAiB;AAChC,QAAM,OAAO,aAAa;AAAA,EAE1B,MAAM,mBAAmB,KAAK;AAAA,IAC5B,MAAM,OAAO,MAAc,SAAiB,QAAQ,UAAe,CAAA,GAAI;AACrE,WAAK,OAAO;AACZ,YAAM,UAAkC,CAAC;AACzC,UAAI,KAAK,OAAO;AACN,gBAAA,gBAAgB,UAAU,KAAK,KAAK;AAAA,MAAA;AAG1C,UAAA;AACI,cAAA,WAAW,MAAM,OAAO,GAAG,OAAO,OAAO,OAAO,GAAG,IAAI,IAAI;AAAA,UAC/D,QAAQ,OAAO,YAAY;AAAA,UAC3B,MAAM,KAAK,KAAK;AAAA,UAChB,SAAS;AAAA,YACP,GAAG;AAAA,YACH,GAAI,QAAQ,WAAW,CAAA;AAAA,UACzB;AAAA,UACA,GAAG;AAAA,QAAA,CACJ;AAED,aAAK,OAAO;AACL,eAAA;AAAA,eACA,OAAY;AACf,YAAA,MAAM,eAAe,KAAK;AAC5B,eAAK,OAAO,IAAI,MAAM,KAAK,MAAM;AAAA,QAAA;AAEnC,aAAK,OAAO;AACN,cAAA;AAAA,MAAA;AAAA,IACR;AAAA,EACF;AAGF,SAAO,SAAS,IAAI,WAAW,IAAI,CAAC;AACtC;","names":[],"sources":["../../../../composables/useVForm.ts"],"sourcesContent":["// composables/useVForm.ts\nimport Form from \"vform\";\nimport { reactive } from \"vue\";\n\nexport function useVForm(data: object) {\n  const config = useRuntimeConfig();\n  const auth = useAuthStore();\n\n  class CustomForm extends Form {\n    async submit(path: string, method: string = \"post\", options: any = {}) {\n      this.busy = true;\n      const headers: Record<string, string> = {};\n      if (auth.token) {\n        headers.Authorization = `Bearer ${auth.token}`;\n      }\n\n      try {\n        const response = await $fetch(`${config.public.apiBase}${path}`, {\n          method: method.toUpperCase(),\n          body: this.data(),\n          headers: {\n            ...headers,\n            ...(options.headers || {}),\n          },\n          ...options,\n        });\n\n        this.busy = false;\n        return response;\n      } catch (error: any) {\n        if (error.statusCode === 422) {\n          this.errors.set(error.data.errors);\n        }\n        this.busy = false;\n        throw error;\n      }\n    }\n  }\n\n  return reactive(new CustomForm(data));\n}\n"],"version":3}