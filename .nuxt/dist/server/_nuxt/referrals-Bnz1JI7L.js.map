{"version":3,"file":"referrals-Bnz1JI7L.js","sources":["../../../../virtual:public?%2Fimages%2Fdashboard%2Ficon%2Fcopy.png","../../../../pages/dashboard/referrals.vue"],"sourcesContent":["import { publicAssetsURL } from '#internal/nuxt/paths';export default publicAssetsURL(\"/images/dashboard/icon/copy.png\")","<template>\n\t<div class=\"dashboard-body mt30\">\n\t\t<!--start refer -->\n\t\t<div class=\"input bg-border-input\">\n\t\t\t<div class=\"refer-link-box-inner d-flex align-items-center g30 position-relative\">\n\t\t\t\t<p>Referral Link :</p>\n\t\t\t\t<input type=\"text\" id=\"refer-url\" ref=\"referralInput\" readonly :value=\"referralLink\" />\n\t\t\t\t<img src=\"/images/dashboard/icon/copy.png\" alt=\"copy\" @click.prevent=\"copyReferralLink\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<!--end refer -->\n\n\t\t<!--Start user referable-list -->\n\t\t<div class=\"data-show-table-area dashboard-box mt30\">\n\t\t\t<div class=\"table-header-area d-flex align-items-center justify-content-between\">\n\t\t\t\t<div class=\"table-heading\">\n\t\t\t\t\t<h5>Referral Users ({{ users?.total || 0 }})</h5>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"search-box-area\">\n\t\t\t\t\t<form @submit.prevent=\"searchUsers\">\n\t\t\t\t\t\t<div class=\"input bg-border-input position-relative\">\n\t\t\t\t\t\t\t<div class=\"search-icon\">\n\t\t\t\t\t\t\t\t<i class=\"fas fa-search\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<input v-model=\"searchQuery\" type=\"search\" class=\"form-control\" id=\"search\" placeholder=\"Search here.\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"common-table mt30\">\n\t\t\t\t<table class=\"custom-table display nowrap mobile-table\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>SL</th>\n\t\t\t\t\t\t\t<th>Reg. Date</th>\n\t\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t\t<th>Username</th>\n\t\t\t\t\t\t\t<th>Email</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<template v-if=\"users?.data?.length > 0\">\n\t\t\t\t\t\t\t<tr v-for=\"(user, i) in users.data\" :key=\"user.id\">\n\t\t\t\t\t\t\t\t<td>{{ (users.current_page - 1) * users.per_page + i + 1 }}</td>\n\t\t\t\t\t\t\t\t<td>{{ formatDate(user.created_at) }}</td>\n\t\t\t\t\t\t\t\t<td>{{ user.name }}</td>\n\t\t\t\t\t\t\t\t<td>{{ user.username }}</td>\n\t\t\t\t\t\t\t\t<td>{{ user.email }}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<tr v-else>\n\t\t\t\t\t\t\t<td colspan=\"100%\" class=\"text-center\">No user found!</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t\t<BackendPartialsPagination :data=\"users\" @pagination-change-page=\"getUsers\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\n\n\tdefinePageMeta({\n\t\ttitle: 'Referrals',\n\t\tlayout: 'backend',\n\t\tauthenticated: true\n\t});\n\n\tconst config = useRuntimeConfig();\n\tconst authStore = useAuthStore();\n\tconst { user } = storeToRefs(authStore);\n\n\t// Referral link logic\n\tconst referralLink = computed(() => {\n\t\treturn `${config.public.appUrl}?ref=${user.value.unique_id}`;\n\t});\n\n\tconst { copyNow } = useClipboard();\n\tconst copyReferralLink = async () => {\n\t\tcopyNow(referralLink.value);\n\t};\n\n\t// Users data and pagination logic\n\tconst users = ref([]);\n\tconst searchQuery = ref('');\n\n\t// Date formatter\n\tconst formatDate = (dateString) => {\n\t\treturn new Date(dateString).toLocaleDateString('en-US', {\n\t\t\tyear: 'numeric',\n\t\t\tmonth: 'short',\n\t\t\tday: 'numeric'\n\t\t});\n\t};\n\n\t// API calls\n\tconst { myFetch } = useApi();\n\tconst getUsers = async (page = 1) => {\n\t\tconst params = new URLSearchParams({\n\t\t\tpage: page.toString(),\n\t\t\tsearch: searchQuery.value\n\t\t});\n\n\t\tconst response = await myFetch(`get-referral-users?${params.toString()}`);\n\t\tusers.value = response;\n\t};\n\n\tconst searchUsers = () => {\n\t\tgetUsers(1);\n\t};\n\n\t// Initial data fetch\n\tonMounted(() => {\n\t\tgetUsers();\n\t});\n</script>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAuD,MAAe,aAAA,gBAAgB,iCAAiC;;;;;ACsEtH,UAAM,SAAS,iBAAkB;AACjC,UAAM,YAAY,aAAc;AAChC,UAAM,EAAE,KAAI,IAAK,YAAY,SAAS;AAGtC,UAAM,eAAe,SAAS,MAAM;AACnC,aAAO,GAAG,OAAO,OAAO,MAAM,QAAQ,KAAK,MAAM,SAAS;AAAA,IAC5D,CAAE;AAEmB,iBAAY;AAMhC,UAAM,QAAQ,IAAI,EAAE;AACpB,UAAM,cAAc,IAAI,EAAE;AAG1B,UAAM,aAAa,CAAC,eAAe;AAClC,aAAO,IAAI,KAAK,UAAU,EAAE,mBAAmB,SAAS;AAAA,QACvD,MAAM;AAAA,QACN,OAAO;AAAA,QACP,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAGD,UAAM,EAAE,QAAS,IAAG,OAAQ;AAC5B,UAAM,WAAW,OAAO,OAAO,MAAM;AACpC,YAAM,SAAS,IAAI,gBAAgB;AAAA,QAClC,MAAM,KAAK,SAAU;AAAA,QACrB,QAAQ,YAAY;AAAA,MACvB,CAAG;AAED,YAAM,WAAW,MAAM,QAAQ,sBAAsB,OAAO,SAAU,CAAA,EAAE;AACxE,YAAM,QAAQ;AAAA,IACd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}